"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9359],{35986:(e,a,t)=>{t.d(a,{Z:()=>r});t(57627);const r=(0,t(97787).Z)({resolved:{},chunkName:()=>"PlaySimilarGames.component.async",isReady(e){const a=this.resolve(e);return!0===this.resolved[a]&&!!t.m[a]},importAsync:()=>Promise.all([t.e(6122),t.e(6855)]).then(t.bind(t,30198)),requireAsync(e){const a=this.resolve(e);return this.resolved[a]=!1,this.importAsync(e).then(e=>(this.resolved[a]=!0,e))},requireSync(e){const a=this.resolve(e);return t(a)},resolve:()=>30198},{})},4219:(e,a,t)=>{t.r(a),t.d(a,{default:()=>E});var r=t(87363),s=t(93335),i=t(38225),n=t(19694),l=t(50678),o=t(45252),c=t(46084),u=t(68927),p=t(10122),d=t(77314),m=t(60617),y=t(35986),f=t(39138),g=t(95663),h=t(83959),b=t(84791),v=t(19646),_=t(85031),O=t(57627),P=Object.defineProperty,w=Object.defineProperties,N=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,j=(e,a,t)=>a in e?P(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;const D={},E=({className:e,appId:a,inGamePage:t=!1,isBlackFadeout:P})=>{var E;const{isGamesApp:I,isWorldWide:L,lang:x,pfid:C,platform:M,playPageData:V,abt:{flags:F}}=(0,r.useContext)(l.Z),[Z,B]=(0,r.useState)(!1),T=(0,i.T)(),{isSearchCrawler:k}=(0,_.P)(),q=(0,f.T)(),H=(0,g.f)(),U=(0,i.C)(e=>e.similarGames||D),R=(0,i.C)(n.bL),J=(0,i.C)(e=>e.isDev),K=(0,i.C)(e=>e.similarGamesLoading),W=!(0,v.Z)(V.gameData||null,M),Q=a||(null==(E=V.gameInfo)?void 0:E.appId),X=((e,a,t)=>{const s=(0,u.TH)(),[i]=(0,r.useState)(()=>({queryParams:s.search.slice(1),hash:s.hash})),{isDistGame:n,abt:{flags:l}}=(0,d.b)(),o=(0,m.tQ)(l),y=(0,m.Fe)(l),{isModalVisible:f}=(0,p.c)();return(0,r.useMemo)(()=>(0,c._Z)({appId:a,hasMounted:t,inGamePage:e,isDistGame:n,isLoginStripeVisible:f,locationHash:i.hash,locationSearch:i.queryParams,showExceptNavigationFromPlayedGames:o,showOnRedirectFromCatalog:y}),[a,t,e,n,f,i,o,y])})(k||t,Q,H),$=(0,r.useMemo)(()=>!K&&void 0===U[Number(Q)],[U,Q,K]);if((0,r.useEffect)(()=>{(0,b.EE)(()=>{B(!0)},t?3e3:void 0)},[t]),(0,r.useEffect)(()=>{if(Z&&X&&$){let a=o.PS;if(J){const e=parseInt((0,h.V)(o.Vs)||"");e>0&&(a=e)}T((0,s.w1)((e=((e,a)=>{for(var t in a||(a={}))A.call(a,t)&&j(e,t,a[t]);if(S)for(var t of S(a))G.call(a,t)&&j(e,t,a[t]);return e})({adjustGamesCount:c.kr.bind(null,a),appId:Number(Q),int:L,lang:x},(0,m.B0)(F)?{pageType:"game"}:{}),w(e,N({pfid:C,platform:M,standalone:I,gamesCount:a})))))}var e},[Q,T,X,F,J,I,L,x,C,M,Z,$]),!X)return(0,c.ii)(),null;if(k&&t&&X&&!(e=>{if(null==e)return!0;if(Array.isArray(e)||"string"==typeof e)return!e.length;for(let a in e)if(e.hasOwnProperty(a))return!1;return!0})(U))return(0,O.jsxs)("section",{className:"game-page__similar",children:[(0,O.jsx)("span",{className:"similar__title",children:q("similar.title-in-game-page")}),(0,O.jsx)(y.Z,{inGamePage:t,isBlackFadeout:P,similarToAppId:Q,visible:!0})]});const z=R||H&&Z&&!K||W;return!k&&t?(0,O.jsxs)("section",{className:"game-page__similar-in-game-page",children:[(0,O.jsx)("h2",{className:"similar__title",children:q("suggestions.similar-title")}),(0,O.jsx)("div",{className:"similar__container",children:(0,O.jsx)(y.Z,{className:e,inGamePage:t,isBlackFadeout:P,similarToAppId:Q,visible:z})})]}):(0,O.jsx)(y.Z,{className:e,inGamePage:t,isBlackFadeout:P,similarToAppId:Q,visible:z})}},81092:(e,a,t)=>{t.d(a,{AN:()=>u,f_:()=>n,ht:()=>s,hu:()=>i,lt:()=>o,rV:()=>l,wu:()=>c});var r=t(23497);const s=e=>({type:r.esH,payload:{value:e}}),i=e=>({type:r.iZl,payload:{value:e}}),n=e=>({type:r.OSx,payload:{value:e}}),l=e=>({type:r.E_7,payload:{value:e}}),o=e=>({type:r.Die,payload:{value:e}}),c=e=>({type:r.atG,payload:{value:e}}),u=e=>({type:r.cIs,payload:{value:e}})},19694:(e,a,t)=>{t.d(a,{B8:()=>i,Nl:()=>n,bL:()=>r,yD:()=>s});const r=e=>e.ui.isFullscreenActive,s=e=>e.ui.isFullscreenEnabled,i=e=>e.ui.isLoginStripeLargeModalVisible,n=e=>e.ui.isLoginStripeModalVisible},46084:(e,a,t)=>{t.d(a,{_Z:()=>w,ii:()=>N,kr:()=>O,xG:()=>_});var r=t(67748),s=t.n(r),i=t(79092),n=t(94365),l=t(7323),o=t(45252),c=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(e,a,t)=>a in e?c(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,g=(e,a)=>{for(var t in a||(a={}))m.call(a,t)&&f(e,t,a[t]);if(d)for(var t of d(a))y.call(a,t)&&f(e,t,a[t]);return e},h=(e,a)=>u(e,p(a));const b=e=>{let a;try{a=JSON.parse(e)}catch(e){a=[]}return Array.isArray(a)?a:[]},v=(e,a)=>{const t=Array.isArray(e)?e:b(e);a&&t.push(a),(0,l.Ur)(o.VM,JSON.stringify(t))};function _(e){const a=(0,l.dq)(o.VM);a.wasError||!a.value?(0,l.Ur)(o.VM,JSON.stringify([e])):v(a.value,e)}function O(e,a){return 0===a.length?a:a.length>e?a=a.slice(0,e):(a.length<e&&(a=[...Array(Math.ceil(e/a.length))].reduce((e,t,r)=>e.concat(a.map((e,t)=>h(g({},e),{appID:e.appID+r,title:e.title+` (${r*a.length+t+1})`}))),[]).slice(0,e)),a)}const P=["played","user_profile_recent_games"];function w({appId:e,hasMounted:a,inGamePage:t,isDistGame:r,isLoginStripeVisible:c,locationHash:u,locationSearch:p,showExceptNavigationFromPlayedGames:d,showOnRedirectFromCatalog:m}){if(r||c)return!1;const y=new URLSearchParams(p);if("distrib"===y.get("utm_source")||y.has("clid"))return!1;if(t)return!0;if(!a)return!0;if((0,i.X)())return!1;if(d){const e=s().parse(u);if(e.pos&&"string"==typeof e.pos)try{if(P.includes(JSON.parse(e.pos).listType))return!1}catch(e){}}else if(!m&&(0,n.Oo)())return!1;const f=(0,l.dq)(o.VM);return!(!f.wasError&&f.value&&b(f.value).includes(e))}function N(){"undefined"!=typeof document&&document.body.classList.contains("with-similar-games")&&document.body.classList.remove("with-similar-games")}},32041:(e,a,t)=>{t.d(a,{p:()=>r,y:()=>s});const r="yandexGames_stripe_modal_hide_until",s="yandexGames_stripe_large_modal_hide_until"},10122:(e,a,t)=>{t.d(a,{c:()=>u});var r=t(43774),s=t(87363),i=t(81092),n=t(38225),l=t(19694),o=t(32041),c=t(90430);const u=()=>{const e=(0,n.T)(),a=(0,n.C)(l.B8);return(0,s.useEffect)(()=>{const a=!(0,r.v_)({off:"login_stripe_bottom_game"})&&(0,c.G)(o.y);e((0,i.wu)(a))},[e]),{isModalVisible:a,setIsModalVisible:(0,s.useCallback)(a=>{e((0,i.wu)(a))},[e])}}},90430:(e,a,t)=>{t.d(a,{G:()=>n,R:()=>i});var r=t(7323),s=t(2592);function i(e){const a=Date.now()+s.s2;return(0,r.Ur)(e,String(a))}function n(e){const a=(0,r.dq)(e);if(a.wasError)return!1;if(!a.value)return!0;const t=parseInt(a.value,10);return!isNaN(t)&&Date.now()>=t}}}]);
//# sourceMappingURL=https://s3.mdst.yandex.net/games/source-maps/_/build/client/game/desktop/yandex/PlaySimilarGamesManager.component.async.efa4988ddfb80bd7bb3d.js.map