"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3003],{4335:(e,t,o)=>{o.r(t),o.d(t,{PopupDesktop:()=>i});var n=o(57627),r=o(87363),l=o(51340),a=o(61265),s=o(76753);const i=({children:e,forceShow:t=!1,onClose:o,id:i,weight:c,testId:u="popup"})=>{const{isShown:p,hide:d}=((e,t,o)=>{const n=(0,r.useRef)(o),{registerPopup:l,isShown:i,hidePopup:c,showPopup:u}=(0,a.U5)();(0,s.q)(()=>(l({name:e,weight:t,showCondition:()=>!1}),n.current&&(u({name:e,weight:t}),n.current=!1),()=>{c(e)}));const p=(0,r.useCallback)(()=>c(e),[c,e]),d=(0,r.useCallback)(()=>u(e),[u,e]);return{isShown:i(e)||n.current,hide:p,show:d}})(i,c,t),m=(0,r.useCallback)(()=>{d(),null==o||o()},[d,o]);return p?(0,n.jsx)(l.Z,{centeredVertically:!1,cls:"PopupDesktop-module__popup--UOTeD",testId:u,onClose:m,children:(0,n.jsx)("div",{className:"PopupDesktop-module__popupInner--XyIJw",children:(0,n.jsx)("div",{className:"PopupDesktop-module__popupContent--PSgu3",children:e})})}):null}},51340:(e,t,o)=>{o.d(t,{Z:()=>b});var n=o(57627),r=o(63904),l=o.n(r),a=o(84383),s=o(87363),i=o.n(s),c=o(74344),u=o(4522),p=o(32743),d=Object.defineProperty,m=(e,t,o)=>(((e,t,o)=>{t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o})(e,"symbol"!=typeof t?t+"":t,o),o);const f=l().with("modal-wrapper"),h=class e extends s.PureComponent{constructor(){super(...arguments),m(this,"elementRef",i().createRef()),m(this,"handleCloseButtonClick",()=>{var e,t;this.props.onClose(),null==(t=(e=this.props).onCloseButtonLog)||t.call(e)}),m(this,"handleModalClick",e=>{var t,o;this.props.closeByOuterClick&&e.target.classList.contains(f())&&(this.props.onClose(),null==(o=(t=this.props).onCloseBackgroundLog)||o.call(t))})}componentDidMount(){null!==this.elementRef.current&&this.props.blockBodyScroll&&(0,a.Qp)(this.elementRef.current,{allowTouchMove:e=>{for(;e&&e!==document.body;){if(null!==e.getAttribute("data-body-scroll-lock-ignore"))return!0;if(!e.parentElement)return!1;e=e.parentElement}return!1},reserveScrollBarGap:!0})}componentWillUnmount(){null!==this.elementRef.current&&this.props.blockBodyScroll&&(0,a.tG)(this.elementRef.current)}render(){const{buttonClassName:t="",centeredVertically:o,children:r,closeButtonColor:l,closeButtonType:a,closeButtonTestId:s,cls:i="",containerClassName:d="",containerRef:m,isAdaptive:h,style:b,testId:v}=this.props;let C=this.elementRef;return m&&(C=(0,p.l)(this.elementRef,m)),(0,n.jsx)("div",{className:(0,u.E)(f({"centered-vertically":o,adaptive:h}),i),"data-testid":v,ref:C,style:b,onClick:this.handleModalClick,children:(0,n.jsxs)("div",{className:(0,u.E)(f("container"),d),children:["none"!==a&&(0,n.jsx)(c.Z,{color:l||"black","data-testid":s,mix:(0,u.E)(t),type:a||e.defaultProps.closeButtonType,onClick:this.handleCloseButtonClick}),r]})})}};m(h,"defaultProps",{blockBodyScroll:!0,centeredVertically:!0,closeButtonType:"popup",closeByOuterClick:!0,isAdaptive:!1});let b=h},79332:(e,t,o)=>{o.d(t,{U:()=>a});var n=o(87363),r=o(82125),l=o(76753);const a=()=>{const e=(0,n.useContext)(r.v);return(0,l.q)(()=>(e.incrementSubscribers(),()=>{e.decrementSubscribers()})),e.data}},46207:(e,t,o)=>{o.d(t,{O:()=>se});var n=o(57627),r=o(87363);var l=o(36329),a=o(19291);const s=({iconType:e,iconColor:t,buttonColor:o,onClick:r})=>(0,n.jsx)(l.z,{iconLeft:(0,n.jsx)(a.Z,{type:e}),rounded:!0,style:{"--bg":o,"--cl-icon":t,"--fill-color":t},view:"secondary",onClick:r});var i=o(90842),c=o(69005);const u=({className:e,text:t})=>{if(!t||!t.includes(i.u))return(0,n.jsx)("div",{className:e,children:t});const o=t.split(i.u);return(0,n.jsxs)("div",{className:e,children:[o[0],(0,n.jsx)(c.Z,{size:20}),o[1]]})};var p=o(43596),d=o(77314),m=o(4522),f=o(93181),h=Object.defineProperty,b=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,y=(e,t,o)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))v.call(t,o)&&y(e,o,t[o]);if(b)for(var o of b(t))C.call(t,o)&&y(e,o,t[o]);return e};const k=({className:e,description:t,disclaimer:o,icon:r,isHelpButtonEnabled:l,styles:a,onButtonClick:i,onHelpButtonClick:c,title:h})=>{const{rtl:b}=(0,d.b)(),v=(0,f.V)();return(0,p.H)({eventName:v?"onShowGamePagePayment":"onShowMainPagePayment"}),(0,n.jsxs)("div",{className:(0,m.E)("PartnerPromo-module__container--yxzDK",e),role:"button",style:g(g({},(null==a?void 0:a.background)&&{background:a.background}),(null==a?void 0:a.textColor)&&{color:a.textColor}),onClick:l?c:i,children:[r&&(0,n.jsx)("img",{alt:r.alt||h,className:"PartnerPromo-module__image--bpTeT",src:r.url,style:{maxWidth:r.maxWidth,maxHeight:r.maxHeight}}),(0,n.jsx)("div",{className:"PartnerPromo-module__content--aQIow",children:(0,n.jsx)(u,{text:t})}),(0,n.jsx)("div",{className:"PartnerPromo-module__button--Tjn0R",children:l?(0,n.jsx)(s,{buttonColor:null==a?void 0:a.helpButtonColor,iconColor:null==a?void 0:a.helpButtonIconColor,iconType:"instruction-open"}):(0,n.jsx)(s,{buttonColor:null==a?void 0:a.buttonColor,iconColor:null==a?void 0:a.buttonIconColor,iconType:b?"arrow-short-back":"arrow-short-forward"})}),o&&(0,n.jsx)("div",{className:"PartnerPromo-module__offerDisclaimer--AoV5O",children:o})]})};var _=o(35119),w=(e=>(e.Empty="__empty__",e.Rules="rules",e.TargetAction="target-action",e))(w||{});const x=e=>e===w.Empty?new URLSearchParams:new URLSearchParams({[_.W]:e});var P=o(28676),j=Object.defineProperty,O=Object.defineProperties,S=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,N=(e,t,o)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;let D;{const{PopupDesktop:e}=o(4335);D=e}const R=e=>{var t,o=e,{children:r}=o,l=((e,t)=>{var o={};for(var n in e)T.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&B)for(var n of B(e))t.indexOf(n)<0&&E.call(e,n)&&(o[n]=e[n]);return o})(o,["children"]);return(0,n.jsx)(D,(t=((e,t)=>{for(var o in t||(t={}))T.call(t,o)&&N(e,o,t[o]);if(B)for(var o of B(t))E.call(t,o)&&N(e,o,t[o]);return e})({},l),O(t,S({children:r}))))};var I=o(79332),A=o(61161);var L=o(39138),M=o(38225),U=o(87137),$=o(73520),H=o(34589),V=o(24046),z=Object.defineProperty,G=Object.defineProperties,q=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,Y=(e,t,o)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;const F=()=>{const e=(()=>{const e=(0,H.$)(),t=(0,M.C)(U.GA);return(0,r.useCallback)((o,n={})=>{if(!t)return;const{withStatus:r,withModal:l,partnerModalType:a=""}=n,s=t.partner_event_status;let i=o;l&&(i=`${i}_modal`),r&&(i=`${i}_${s}`);const c=(u=((e,t)=>{for(var o in t||(t={}))K.call(t,o)&&Y(e,o,t[o]);if(W)for(var o of W(t))Z.call(t,o)&&Y(e,o,t[o]);return e})({block:V.Q.PARTNER_EVENT,elem:i},t),G(u,q({partner_modal_type:a})));var u;e({action:{name:$.C.CLICK}},c)},[t,e])})(),t=(0,r.useCallback)(()=>{e("legal_conditions")},[e]),o=(0,r.useCallback)((t,o)=>{e("partner_button",{withStatus:!0,withModal:Boolean(o),partnerModalType:t})},[e]),n=(0,r.useCallback)(()=>{e("partner_button_apply",{withStatus:!0})},[e]);return{logHelpButtonClick:(0,r.useCallback)(()=>{e("partner_button_help",{withStatus:!0})},[e]),logPreApplyButtonClick:o,logApplyButtonClick:n,logLegalConditionsClick:t,logDetailsDocumentClick:(0,r.useCallback)(t=>()=>{e(`partner_document_${t}`)},[e])}},X=({documents:e=[],onCtaButtonClick:t,partnerBrandColor:o,partnerSlugName:a,iconUrl:s,showCtaButton:i})=>{const c=(0,L.T)(),{logDetailsDocumentClick:u,logApplyButtonClick:p}=F(),d=(0,r.useCallback)(e=>{p(),null==t||t(e)},[p,t]),m=(0,r.useMemo)(()=>c(`partner.${a}.offer-details.detailed-points`).split("\n"),[c,a]),f={"--bg":o&&`${o}`,"--cl-text":"var(--black-1000)"};return(0,n.jsxs)("div",{className:"PartnerOfferDetails-module__partnerOfferContainer--zXEBh","data-testid":"partner-offer-details",children:[s&&(0,n.jsx)(A.Z,{alt:"partner-brand-image",className:"PartnerOfferDetails-module__partnerIcon--NKl0y",src:s}),(0,n.jsx)("span",{className:"PartnerOfferDetails-module__partnerOfferTitle--IY_B_",children:c(`partner.${a}.offer-details.title`)}),(0,n.jsx)("ul",{className:"PartnerOfferDetails-module__partnerOfferDetailsList--Eb2d3",children:m.map((e,t)=>(0,n.jsx)("li",{children:e},`${a}.details.${t}`))}),e.map(({url:e,key:t})=>(0,n.jsx)(l.z,{className:"PartnerOfferDetails-module__partnerOfferDetailsLink--iqLWz",href:e,rel:"noreferrer noopener",target:"_blank",view:"empty",onClick:u(t),children:c(`partner.${a}.offer-details.${t}`)},t)),i&&(0,n.jsx)(l.z,{className:"PartnerOfferDetails-module__partnerOfferCtaButton--VyEAI",size:40,style:f,onClick:d,children:c(`partner.${a}.offer-details.continue-with-offer`)})]})};var Q=o(76753),J=o(74516),ee=o(10323);function te({url:e,onShow:t}){const o=(0,r.useRef)(null);return(0,Q.q)(()=>{null==t||t()}),(0,n.jsx)("div",{className:"TBankIframe-module__iframeContainer--IO9JR",children:(0,n.jsx)("iframe",{className:"TBankIframe-module__iframe--ta66C","data-testid":"tbank-iframe",ref:o,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals allow-popups-to-escape-sandbox allow-storage-access-by-user-activation allow-top-navigation-by-user-activation",src:e})})}var oe=o(51340);const ne=({onClose:e,children:t})=>{(0,r.useId)();const o=(0,r.useCallback)(()=>{null==e||e()},[e]);return(0,n.jsx)(oe.Z,{centeredVertically:!0,cls:"TBankModal-module__modal--noFxU",isAdaptive:!0,testId:"tbank-modal",onClose:o,children:(0,n.jsx)("div",{className:"TBankModal-module__modalContent--ktfRy",children:(0,n.jsx)("div",{className:"TBankModal-module__modalContentInner--nOBLy",children:t})})})},re={tbank:{initialStep:w.Empty,steps:{[w.Rules]:{StepView:({nextStep:e,onClose:t,onShow:o,onCompleted:l})=>{(0,Q.q)(()=>{null==o||o()});const a=(0,r.useCallback)(()=>{null==t||t()},[t]),s=(0,r.useCallback)(()=>x(e),[e]),i=(0,r.useId)(),c=(0,I.U)();if(!c)return null;const{button:u,documents:p,media:{icon:d},entitySlug:m}=c,f=null==u?void 0:u.mainColor,h=null==u?void 0:u.status;return(0,n.jsx)(R,{forceShow:!0,id:i,testId:"partner-offer-details-popup",weight:50,onClose:a,children:(0,n.jsx)(P.s,{applyRetpathSearchParams:s,passportOrigin:ee._4.GamesPartnerOffer,children:({login:e,userIsLoggedIn:t})=>{const o=d?`${d.prefixURL}/${J.KL.orig}`:void 0,r="default"===h;return(0,n.jsx)(X,{documents:p,iconUrl:o,partnerBrandColor:f,partnerSlugName:m,showCtaButton:r,onCtaButtonClick:o=>{t?null==l||l():e(o)}})}})})},nextStep:w.TargetAction},[w.TargetAction]:{StepView:({onClose:e,onError:t,onShow:o})=>{var l,a,s,i;const c=(0,I.U)(),u=(0,M.C)(e=>Boolean(e.userData.uid)),[p,d]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null!=(a=null==(l=null==c?void 0:c.button)?void 0:l.iframeURL)?a:"");(0,r.useEffect)(()=>{var e,t;p||f(null!=(t=null==(e=null==c?void 0:c.button)?void 0:e.iframeURL)?t:"")},[null==(s=null==c?void 0:c.button)?void 0:s.iframeURL,p]);const h="default"===(null==(i=null==c?void 0:c.button)?void 0:i.status)||p,b=m||p,v="tbank"===(null==c?void 0:c.entitySlug),C=(0,r.useCallback)(()=>{d(!0),null==o||o()},[o]);return(0,r.useEffect)(()=>{h||null==t||t(new Error("TargetActionStep: The status is incorrect.")),b||null==t||t(new Error("TargetActionStep: Empty iframe URL.")),u||null==t||t(new Error("TargetActionStep: The user is not logged in."))},[h,b,u,t]),u&&v&&h&&b?(0,n.jsx)(ne,{onClose:e,children:(0,n.jsx)(te,{url:m,onShow:C})}):null},nextStep:w.Empty}}}};var le=o(84532),ae=o(34647);const se=({className:e,isTransparent:t=!0,startPartnerOfferInNewTab:o=!1,partnerModalType:l,onPromoAction:a})=>{var s,i,c;const u=(0,I.U)(),p=null==u?void 0:u.entitySlug,{logPreApplyButtonClick:m,logHelpButtonClick:f}=F(),{step:h,setStep:b}=(e=>{const{searchParams:t,navigate:o}=(0,le.wG)(),{pathsMapping:n}=(0,d.b)(),l=(0,r.useCallback)((r,l=!1)=>{if(!e)return;const a=(0,ae.ci)({pathsMapping:n},{entitySlug:e}),s=x(r).toString();r===w.Empty&&t.delete(_.W),o({pathname:a,search:s},{preserveSearch:!0,shouldOpenInNewTab:l})},[o,e,n,t]),a=(0,r.useMemo)(()=>{var o;const n=t.get(_.W);return e&&re[e]?n?n in(null==(o=re[e])?void 0:o.steps)?n:w.Empty:re[e].initialStep:w.Empty},[e,t]);return(0,r.useMemo)(()=>({step:a,setStep:l}),[l,a])})(p),v=(0,r.useCallback)(()=>{null==a||a(),m(l,"with_modal"),b(w.Rules,o)},[m,a,b,o,l]),C=(0,r.useCallback)(()=>{null==a||a(),f(),b(w.Rules,o)},[f,a,b,o]);if(!u||h===w.Empty)return null;const y=(({erid:e="",offerDisclaimer:t})=>(null==t?void 0:t.includes("{erid}"))?t.replace("{erid}",e):t)({erid:null==(i=null==(s=u.legalConditions)?void 0:s.erids)?void 0:i.payments,offerDisclaimer:null==(c=u.legalConditions)?void 0:c.offerDisclaimer}),{subtitle:g,media:{textColor:P,icon:j,background:O},button:S}=u,B="default"!==(null==S?void 0:S.status);return(0,n.jsx)(k,{className:e,description:g,disclaimer:y,icon:j?{url:`${j.prefixURL}/${J.KL.orig}`}:void 0,isHelpButtonEnabled:B,styles:{buttonColor:null==S?void 0:S.mainColor,buttonIconColor:P.mainColor,textColor:t?void 0:P.mainColor,background:t?void 0:O.mainColor,helpButtonIconColor:t?void 0:P.mainColor,helpButtonColor:t||null==S?void 0:S.mainColor},title:u.title,onButtonClick:v,onHelpButtonClick:C})}},55303:(e,t,o)=>{o.d(t,{Y:()=>l});var n=o(3891),r=o(53673);function l(e,t,o,l){return(0,n.V)(e,t,o,l)?r.qY.XSOLLA:r.qY.TRUST}},19544:(e,t,o)=>{o.d(t,{i:()=>r});var n=o(27713);function r(){if("undefined"==typeof document||!document.body)return;const{request:{uatraits:e}}=window.appData;if((null==e?void 0:e.OSFamily)!==n.k.IOS)return;const t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("style","position: absolute; opacity: 0; height: 0; font-size: 16px;"),document.body.prepend(t),t.focus(),t.blur(),t.remove()}},57847:(e,t,o)=>{o.d(t,{i:()=>c});var n=o(20966),r=o(29513),l=o(87125),a=o(97731),s=(e,t,o)=>new Promise((n,r)=>{var l=e=>{try{s(o.next(e))}catch(e){r(e)}},a=e=>{try{s(o.throw(e))}catch(e){r(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(l,a);s((o=o.apply(e,t)).next())});const i=(0,l.M$)("AppMetrica",l.XG.Dev);function c(e,t){return s(this,arguments,function*({payCurrency:e,price:t},o){if("function"==typeof(null==o?void 0:o.reportRevenue)){const l=parseFloat(t.toFixed(2));try{yield o.reportRevenue({revenue:l,currency:e,adjustToken:r.lG}),i("sendReportRevenueOnSuccess",{revenue:l,currency:e,adjustToken:r.lG})}catch(e){(0,n.H)({block:a.W.PAYMENT,message:`reportRevenue error: ${e.message}`},e)}}})}}}]);
//# sourceMappingURL=https://s3.mdst.yandex.net/games/source-maps/_/build/client/game/desktop/yandex/3003.f7b02aa9b2eff9394af0.js.map